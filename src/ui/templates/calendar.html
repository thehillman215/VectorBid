<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Trip Calendar - VectorBid</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        .calendar-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        .calendar-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }
        .calendar-grid {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 1px;
            background: #dee2e6;
            border: 1px solid #dee2e6;
        }
        .calendar-day {
            background: white;
            min-height: 100px;
            padding: 8px;
            position: relative;
        }
        .calendar-day-header {
            font-weight: bold;
            margin-bottom: 5px;
            color: #495057;
        }
        .calendar-day.weekend {
            background: #f8f9fa;
        }
        .calendar-day.other-month {
            background: #f8f9fa;
            color: #adb5bd;
        }
        .trip-block {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 2px 5px;
            margin: 2px 0;
            border-radius: 3px;
            font-size: 11px;
            cursor: pointer;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
        }
        .trip-block.preferred {
            background: linear-gradient(135deg, #48bb78 0%, #38a169 100%);
        }
        .trip-block.avoid {
            background: linear-gradient(135deg, #f56565 0%, #e53e3e 100%);
        }
        .trip-details {
            position: absolute;
            z-index: 1000;
            background: white;
            border: 1px solid #dee2e6;
            border-radius: 8px;
            padding: 15px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            min-width: 250px;
            display: none;
        }
        .trip-details.show {
            display: block;
        }
        .legend {
            display: flex;
            gap: 20px;
            margin-top: 20px;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 8px;
        }
        .legend-item {
            display: flex;
            align-items: center;
            gap: 8px;
        }
        .legend-color {
            width: 20px;
            height: 20px;
            border-radius: 3px;
        }
    </style>
</head>
<body>
    <nav class="navbar navbar-expand-lg navbar-light bg-light">
        <div class="container-fluid">
            <a class="navbar-brand" href="/">
                <i class="fas fa-plane text-primary"></i> VectorBid
            </a>
            <span class="navbar-text">Trip Calendar View</span>
        </div>
    </nav>

    <div class="calendar-container">
        <div class="calendar-header">
            <button class="btn btn-outline-primary" onclick="previousMonth()">
                <i class="fas fa-chevron-left"></i> Previous
            </button>
            <h3 id="calendar-month">February 2025</h3>
            <button class="btn btn-outline-primary" onclick="nextMonth()">
                Next <i class="fas fa-chevron-right"></i>
            </button>
        </div>

        <div class="calendar-grid" id="calendar">
            <!-- Calendar will be generated by JavaScript -->
        </div>

        <div class="legend">
            <div class="legend-item">
                <div class="legend-color" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);"></div>
                <span>Regular Trip</span>
            </div>
            <div class="legend-item">
                <div class="legend-color" style="background: linear-gradient(135deg, #48bb78 0%, #38a169 100%);"></div>
                <span>Preferred (Matches your criteria)</span>
            </div>
            <div class="legend-item">
                <div class="legend-color" style="background: linear-gradient(135deg, #f56565 0%, #e53e3e 100%);"></div>
                <span>Avoid (Conflicts with preferences)</span>
            </div>
        </div>
    </div>

    <script>
        // Sample trip data - in production, this would come from the backend
        const trips = [
            {
                id: 'UA001',
                start: '2025-02-01',
                end: '2025-02-03',
                routing: 'DEN-LAX-SFO-DEN',
                credit: '19:45',
                type: 'regular'
            },
            {
                id: 'UA002',
                start: '2025-02-05',
                end: '2025-02-08',
                routing: 'DEN-LHR-FRA-DEN',
                credit: '26:30',
                type: 'avoid' // Weekend trip
            },
            {
                id: 'UA003',
                start: '2025-02-10',
                end: '2025-02-11',
                routing: 'DEN-PHX-DEN',
                credit: '11:15',
                type: 'preferred' // Short trip
            },
            {
                id: 'UA004',
                start: '2025-02-15',
                end: '2025-02-19',
                routing: 'DEN-NRT-ICN-DEN',
                credit: '34:20',
                type: 'regular'
            }
        ];

        let currentMonth = 1; // February (0-indexed)
        let currentYear = 2025;

        function generateCalendar(month, year) {
            const firstDay = new Date(year, month, 1);
            const lastDay = new Date(year, month + 1, 0);
            const prevLastDay = new Date(year, month, 0);

            const firstDayOfWeek = firstDay.getDay();
            const lastDateOfMonth = lastDay.getDate();
            const prevLastDate = prevLastDay.getDate();

            const monthNames = ["January", "February", "March", "April", "May", "June",
                              "July", "August", "September", "October", "November", "December"];

            document.getElementById('calendar-month').textContent = monthNames[month] + ' ' + year;

            let html = '';

            // Day headers
            const dayHeaders = ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'];
            dayHeaders.forEach(day => {
                html += `<div class="calendar-day-header text-center">${day}</div>`;
            });

            // Previous month days
            for (let i = firstDayOfWeek; i > 0; i--) {
                html += `<div class="calendar-day other-month">${prevLastDate - i + 1}</div>`;
            }

            // Current month days
            for (let day = 1; day <= lastDateOfMonth; day++) {
                const date = new Date(year, month, day);
                const dateStr = date.toISOString().split('T')[0];
                const dayOfWeek = date.getDay();
                const isWeekend = dayOfWeek === 0 || dayOfWeek === 6;

                let dayClass = 'calendar-day';
                if (isWeekend) dayClass += ' weekend';

                html += `<div class="${dayClass}" data-date="${dateStr}">
                    <div style="font-weight: bold;">${day}</div>
                    <div id="trips-${dateStr}"></div>
                </div>`;
            }

            // Next month days
            const remainingDays = 42 - (firstDayOfWeek + lastDateOfMonth);
            for (let day = 1; day <= remainingDays; day++) {
                html += `<div class="calendar-day other-month">${day}</div>`;
            }

            document.getElementById('calendar').innerHTML = html;

            // Add trips to calendar
            trips.forEach(trip => {
                const startDate = new Date(trip.start);
                const endDate = new Date(trip.end);

                for (let d = new Date(startDate); d <= endDate; d.setDate(d.getDate() + 1)) {
                    const dateStr = d.toISOString().split('T')[0];
                    const tripContainer = document.getElementById(`trips-${dateStr}`);

                    if (tripContainer) {
                        const tripBlock = document.createElement('div');
                        tripBlock.className = `trip-block ${trip.type}`;
                        tripBlock.textContent = `${trip.id}: ${trip.routing.split('-')[0]}-${trip.routing.split('-').slice(-1)[0]}`;
                        tripBlock.title = `${trip.id}: ${trip.routing} (${trip.credit})`;
                        tripBlock.onclick = () => showTripDetails(trip);
                        tripContainer.appendChild(tripBlock);
                    }
                }
            });
        }

        function previousMonth() {
            currentMonth--;
            if (currentMonth < 0) {
                currentMonth = 11;
                currentYear--;
            }
            generateCalendar(currentMonth, currentYear);
        }

        function nextMonth() {
            currentMonth++;
            if (currentMonth > 11) {
                currentMonth = 0;
                currentYear++;
            }
            generateCalendar(currentMonth, currentYear);
        }

        function showTripDetails(trip) {
            alert(`Trip ${trip.id}\nRoute: ${trip.routing}\nCredit: ${trip.credit}\nDates: ${trip.start} to ${trip.end}`);
        }

        // Initialize calendar
        generateCalendar(currentMonth, currentYear);
    </script>
</body>
</html>
